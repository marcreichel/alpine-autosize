{"version":3,"file":"alpine-autosize.js","sources":["../src/index.js","../builds/cdn.js"],"sourcesContent":["function Autosize(Alpine) {\n    Alpine.directive(\"autosize\", (el, {modifiers}, {cleanup}) => {\n        const attributes = Array.from(el.attributes);\n\n        let hasWireModel = false;\n\n        for (let {nodeName} of attributes) {\n            if (nodeName === \"wire:model\" || nodeName.startsWith(\"wire:model.\")) {\n                hasWireModel = true;\n                break;\n            }\n        }\n\n        if (!el.hasAttribute(\"wire:ignore\") && hasWireModel) {\n            el.setAttribute(\"wire:ignore\", \"\");\n        }\n\n        const previousResizeValue = el.style.resize;\n        el.style.resize = \"none\";\n\n        const previousMinHeight = el.style.minHeight;\n        el.style.minHeight = `${el.getBoundingClientRect().height}px`;\n\n        const paddingModifier =\n            modifiers.filter((modifier) => modifier.match(/px$/i))[0] || false;\n        let padding = 0;\n        if (paddingModifier !== false) {\n            padding = parseInt(paddingModifier);\n        }\n\n        const handler = () => {\n            if (!el.scrollHeight) {\n                return;\n            }\n            el.style.height = \"4px\";\n            el.style.height = `${el.scrollHeight + padding}px`;\n        };\n\n        handler();\n\n        el.addEventListener(\"input\", handler);\n        el.addEventListener(\"autosize\", handler);\n\n        cleanup(() => {\n            el.style.resize = previousResizeValue;\n            el.style.minHeight = previousMinHeight;\n            el.removeEventListener(\"input\", handler);\n            el.removeEventListener(\"autosize\", handler);\n        });\n    });\n\n    Alpine.magic(\"autosize\", (node) => (el) => {\n        const element = el || node;\n        element.dispatchEvent(new Event(\"autosize\"));\n    });\n}\n\nexport default Autosize;\n","import autosize from '../src/index.js';\n\ndocument.addEventListener('alpine:init', () => {\n    autosize(window.Alpine);\n});\n"],"names":["Autosize","Alpine","directive","el","modifiers","cleanup","attributes","Array","from","hasWireModel","nodeName","startsWith","hasAttribute","setAttribute","previousResizeValue","style","resize","previousMinHeight","minHeight","getBoundingClientRect","height","paddingModifier","filter","modifier","match","padding","parseInt","handler","scrollHeight","addEventListener","removeEventListener","magic","node","element","dispatchEvent","Event","document","autosize","window"],"mappings":";;;;;IAAA,SAASA,QAAT,CAAkBC,MAAlB,EAA0B;IACtBA,EAAAA,MAAM,CAACC,SAAP,CAAiB,UAAjB,EAA6B,CAACC,EAAD,EAAK;IAACC,IAAAA;IAAD,GAAL,EAAkB;IAACC,IAAAA;IAAD,GAAlB,KAAgC;IACzD,UAAMC,UAAU,GAAGC,KAAK,CAACC,IAAN,CAAWL,EAAE,CAACG,UAAd,CAAnB;IAEA,QAAIG,YAAY,GAAG,KAAnB;;IAEA,SAAK,IAAI;IAACC,MAAAA;IAAD,KAAT,IAAuBJ,UAAvB,EAAmC;IAC/B,UAAII,QAAQ,KAAK,YAAb,IAA6BA,QAAQ,CAACC,UAAT,CAAoB,aAApB,CAAjC,EAAqE;IACjEF,QAAAA,YAAY,GAAG,IAAf;IACA;IACH;IACJ;;IAED,QAAI,CAACN,EAAE,CAACS,YAAH,CAAgB,aAAhB,CAAD,IAAmCH,YAAvC,EAAqD;IACjDN,MAAAA,EAAE,CAACU,YAAH,CAAgB,aAAhB,EAA+B,EAA/B;IACH;;IAED,UAAMC,mBAAmB,GAAGX,EAAE,CAACY,KAAH,CAASC,MAArC;IACAb,IAAAA,EAAE,CAACY,KAAH,CAASC,MAAT,GAAkB,MAAlB;IAEA,UAAMC,iBAAiB,GAAGd,EAAE,CAACY,KAAH,CAASG,SAAnC;IACAf,IAAAA,EAAE,CAACY,KAAH,CAASG,SAAT,GAAsB,GAAEf,EAAE,CAACgB,qBAAH,GAA2BC,MAAO,IAA1D;IAEA,UAAMC,eAAe,GACjBjB,SAAS,CAACkB,MAAV,CAAkBC,QAAD,IAAcA,QAAQ,CAACC,KAAT,CAAe,MAAf,CAA/B,EAAuD,CAAvD,KAA6D,KADjE;IAEA,QAAIC,OAAO,GAAG,CAAd;;IACA,QAAIJ,eAAe,KAAK,KAAxB,EAA+B;IAC3BI,MAAAA,OAAO,GAAGC,QAAQ,CAACL,eAAD,CAAlB;IACH;;IAED,UAAMM,OAAO,GAAG,MAAM;IAClB,UAAI,CAACxB,EAAE,CAACyB,YAAR,EAAsB;IAClB;IACH;;IACDzB,MAAAA,EAAE,CAACY,KAAH,CAASK,MAAT,GAAkB,KAAlB;IACAjB,MAAAA,EAAE,CAACY,KAAH,CAASK,MAAT,GAAmB,GAAEjB,EAAE,CAACyB,YAAH,GAAkBH,OAAQ,IAA/C;IACH,KAND;;IAQAE,IAAAA,OAAO;IAEPxB,IAAAA,EAAE,CAAC0B,gBAAH,CAAoB,OAApB,EAA6BF,OAA7B;IACAxB,IAAAA,EAAE,CAAC0B,gBAAH,CAAoB,UAApB,EAAgCF,OAAhC;IAEAtB,IAAAA,OAAO,CAAC,MAAM;IACVF,MAAAA,EAAE,CAACY,KAAH,CAASC,MAAT,GAAkBF,mBAAlB;IACAX,MAAAA,EAAE,CAACY,KAAH,CAASG,SAAT,GAAqBD,iBAArB;IACAd,MAAAA,EAAE,CAAC2B,mBAAH,CAAuB,OAAvB,EAAgCH,OAAhC;IACAxB,MAAAA,EAAE,CAAC2B,mBAAH,CAAuB,UAAvB,EAAmCH,OAAnC;IACH,KALM,CAAP;IAMH,GAhDD;IAkDA1B,EAAAA,MAAM,CAAC8B,KAAP,CAAa,UAAb,EAA0BC,IAAD,IAAW7B,EAAD,IAAQ;IACvC,UAAM8B,OAAO,GAAG9B,EAAE,IAAI6B,IAAtB;IACAC,IAAAA,OAAO,CAACC,aAAR,CAAsB,IAAIC,KAAJ,CAAU,UAAV,CAAtB;IACH,GAHD;IAIH;;ICrDDC,QAAQ,CAACP,gBAAT,CAA0B,aAA1B,EAAyC,MAAM;IAC3CQ,EAAAA,QAAQ,CAACC,MAAM,CAACrC,MAAR,CAAR;IACH,CAFD;;;;;;"}